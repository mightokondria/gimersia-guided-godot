[gd_scene load_steps=20 format=3 uid="uid://bt8pjayii3f46"]

[ext_resource type="Script" uid="uid://by3yf12ty5gjr" path="res://_Scripts/GameManager.gd" id="1_2g5u6"]
[ext_resource type="PackedScene" uid="uid://d1g6kiifioiuw" path="res://_Scenes/Player.tscn" id="1_kchhv"]
[ext_resource type="PackedScene" uid="uid://bmcho5ibaftn" path="res://_Scenes/TextBox.tscn" id="2_2g5u6"]
[ext_resource type="Script" uid="uid://djka36bc42uqr" path="res://_Scripts/SmartCamera.gd" id="5_b6ajn"]
[ext_resource type="Script" uid="uid://7yeoj2w0dtnw" path="res://_Scripts/AnimationPlayer.gd" id="7_c3oyc"]
[ext_resource type="Script" uid="uid://biss50m0vv8gx" path="res://SkillPopup.gd" id="7_mrcx1"]
[ext_resource type="PackedScene" uid="uid://bu6jp2trauwtc" path="res://_Scenes/Sensei.tscn" id="8_mrcx1"]

[sub_resource type="Animation" id="Animation_c3oyc"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SubViewportContainer/Player:is_cutscene")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SubViewportContainer/Sensei:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(380, 1022)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("SubViewportContainer/Sensei/PathTrail:emitting")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_mrcx1"]
resource_name = "SenseiTalk"
length = 4.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SubViewportContainer/Sensei:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.5, 2.1666667),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(390, 1022), Vector2(1310, 1022), Vector2(2020, 1022)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SubViewportContainer/Sensei:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1.1333333, 1.4333333, 1.6),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector2(400, 902), Vector2(390, 902), Vector2(390, 552), Vector2(390, 601)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("SubViewportContainer/Sensei/PathTrail:emitting")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 2.1666667),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}

[sub_resource type="Animation" id="Animation_2g5u6"]
resource_name = "SenseiWalk_2"
length = 4.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SubViewportContainer/Sensei:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.8666667, 2.9),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(390, 1022), Vector2(1310, 1022), Vector2(2020, 1022)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SubViewportContainer/Sensei:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1.5, 1.8, 1.9666667),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector2(400, 902), Vector2(390, 902), Vector2(390, 552), Vector2(390, 601)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("SubViewportContainer/Sensei/PathTrail:emitting")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 2.1666667),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}

[sub_resource type="Animation" id="Animation_2d4v4"]
resource_name = "SenseiWalk_3"
length = 4.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SubViewportContainer/Sensei/PathTrail:emitting")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2.1666667),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SubViewportContainer/Sensei:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1.7666667),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(2330, 902), Vector2(3910, 902)]
}

[sub_resource type="Animation" id="Animation_4d8gl"]
resource_name = "SenseiWalk_4"
length = 4.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SubViewportContainer/Sensei/PathTrail:emitting")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2.1666667),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SubViewportContainer/Sensei:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1.7666667),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(4360, 902), Vector2(5830, 902)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_mrcx1"]
_data = {
&"RESET": SubResource("Animation_c3oyc"),
&"SenseiWalk": SubResource("Animation_mrcx1"),
&"SenseiWalk_2": SubResource("Animation_2g5u6"),
&"SenseiWalk_3": SubResource("Animation_2d4v4"),
&"SenseiWalk_4": SubResource("Animation_4d8gl")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_vwk1b"]
size = Vector2(5889, 149)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_rfx65"]
size = Vector2(777, 74)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2d4v4"]
size = Vector2(178, 74)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_nnjwi"]
size = Vector2(2058.25, 52)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7017n"]
size = Vector2(69.75, 1386)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_mrcx1"]
size = Vector2(13.278687, 284.4263)

[node name="TheStage" type="Node2D" node_paths=PackedStringArray("player", "sensei", "sensei_anim_player", "dialog_box", "camera", "stage1_player_spawn", "stage1_sensei_spawn", "stage1_finish_line", "stage2_player_spawn", "stage2_sensei_spawn", "stage2_finish_line", "stage3_player_spawn", "stage3_sensei_spawn", "stage3_finish_line")]
script = ExtResource("1_2g5u6")
player = NodePath("SubViewportContainer/Player")
sensei = NodePath("SubViewportContainer/Sensei")
sensei_anim_player = NodePath("AnimationPlayer")
dialog_box = NodePath("TextBox")
camera = NodePath("SmartCamera")
stage1_player_spawn = NodePath("SubViewportContainer/Stage1_Player_Spawn")
stage1_sensei_spawn = NodePath("SubViewportContainer/Stage1_Sensei_Spawn")
stage1_finish_line = NodePath("SubViewportContainer/Stage1_FinishLine")
stage2_player_spawn = NodePath("SubViewportContainer/Stage2_Player_Spawn")
stage2_sensei_spawn = NodePath("SubViewportContainer/Stage2_Sensei_Spawn")
stage2_finish_line = NodePath("SubViewportContainer/Stage2_FinishLine")
stage3_player_spawn = NodePath("SubViewportContainer/Stage3_Player_Spawn")
stage3_sensei_spawn = NodePath("SubViewportContainer/Stage3_Sensei_Spawn")
stage3_finish_line = NodePath("SubViewportContainer/Stage3_FinishLine")

[node name="TextBox" parent="." instance=ExtResource("2_2g5u6")]
offset = Vector2(80, -685.031)
scale = Vector2(0.9, 0.9)
transform = Transform2D(0.9, 0, 0, 0.9, 80, -685.031)

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_mrcx1")
}
script = ExtResource("7_c3oyc")

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
offset_left = -12.0
offset_top = 133.0
offset_right = 1908.0
offset_bottom = 1213.0
stretch = true
stretch_shrink = 6
metadata/_edit_use_anchors_ = true

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
transparent_bg = true
handle_input_locally = false
size = Vector2i(320, 180)
render_target_update_mode = 4

[node name="Floor" type="StaticBody2D" parent="SubViewportContainer"]
position = Vector2(798, 533)

[node name="ColorRect" type="ColorRect" parent="SubViewportContainer/Floor"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -799.99994
offset_top = 409.0
offset_right = 1173.6489
offset_bottom = 558.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(2.9599996, 1)
size_flags_horizontal = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="SubViewportContainer/Floor"]
position = Vector2(2144.5, 483.5)
shape = SubResource("RectangleShape2D_vwk1b")

[node name="Player" parent="SubViewportContainer" instance=ExtResource("1_kchhv")]
position = Vector2(143, 883)
scale = Vector2(7.5999975, 7.5999975)
is_cutscene = true

[node name="CollisionShape2D" parent="SubViewportContainer/Player" index="1"]
visible = false

[node name="Sensei" parent="SubViewportContainer" instance=ExtResource("8_mrcx1")]
position = Vector2(380, 1022)
scale = Vector2(6.6799994, 6.6799994)

[node name="StaticBody2D" type="StaticBody2D" parent="SubViewportContainer"]
position = Vector2(798, 462)

[node name="ColorRect" type="ColorRect" parent="SubViewportContainer/StaticBody2D"]
offset_left = 496.0
offset_top = 181.0
offset_right = 1275.0
offset_bottom = 254.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="SubViewportContainer/StaticBody2D"]
position = Vector2(884.5, 218)
shape = SubResource("RectangleShape2D_rfx65")

[node name="ColorRect2" type="ColorRect" parent="SubViewportContainer/StaticBody2D"]
offset_left = 158.0
offset_top = -155.0
offset_right = 336.0
offset_bottom = -82.0

[node name="CollisionShape2D5" type="CollisionShape2D" parent="SubViewportContainer/StaticBody2D"]
position = Vector2(247, -118)
shape = SubResource("RectangleShape2D_2d4v4")

[node name="CollisionShape2D4" type="CollisionShape2D" parent="SubViewportContainer/StaticBody2D"]
position = Vector2(158, -729)
shape = SubResource("RectangleShape2D_nnjwi")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="SubViewportContainer/StaticBody2D"]
position = Vector2(-835, -64)
shape = SubResource("RectangleShape2D_7017n")

[node name="Stage1_Player_Spawn" type="Marker2D" parent="SubViewportContainer"]
position = Vector2(141, 885)
scale = Vector2(2, 2)

[node name="Stage2_Player_Spawn" type="Marker2D" parent="SubViewportContainer"]
position = Vector2(2164, 885)
scale = Vector2(2, 2)

[node name="Stage3_Player_Spawn" type="Marker2D" parent="SubViewportContainer"]
position = Vector2(4169, 848)
scale = Vector2(2, 2)

[node name="Stage1_Sensei_Spawn" type="Marker2D" parent="SubViewportContainer"]
position = Vector2(282, 885)
scale = Vector2(2, 2)

[node name="Stage2_Sensei_Spawn" type="Marker2D" parent="SubViewportContainer"]
position = Vector2(2315, 885)
scale = Vector2(2, 2)

[node name="Stage3_Sensei_Spawn" type="Marker2D" parent="SubViewportContainer"]
position = Vector2(4361, 848)
scale = Vector2(2, 2)

[node name="Stage1_FinishLine" type="Area2D" parent="SubViewportContainer"]
position = Vector2(12, -133)

[node name="CollisionShape2D" type="CollisionShape2D" parent="SubViewportContainer/Stage1_FinishLine"]
position = Vector2(1938.6, 533)
scale = Vector2(4.8799987, 4.8799987)
shape = SubResource("RectangleShape2D_mrcx1")
debug_color = Color(0.68085706, 0.29902464, 1, 0.41960785)

[node name="Stage2_FinishLine" type="Area2D" parent="SubViewportContainer"]
position = Vector2(1947, -133)

[node name="CollisionShape2D" type="CollisionShape2D" parent="SubViewportContainer/Stage2_FinishLine"]
position = Vector2(1938.6, 533)
scale = Vector2(4.8799987, 4.8799987)
shape = SubResource("RectangleShape2D_mrcx1")
debug_color = Color(0.68085706, 0.29902464, 1, 0.41960785)

[node name="Stage3_FinishLine" type="Area2D" parent="SubViewportContainer"]
position = Vector2(3871, -133)

[node name="CollisionShape2D" type="CollisionShape2D" parent="SubViewportContainer/Stage3_FinishLine"]
position = Vector2(1938.6, 533)
scale = Vector2(4.8799987, 4.8799987)
shape = SubResource("RectangleShape2D_mrcx1")
debug_color = Color(0.68085706, 0.29902464, 1, 0.41960785)

[node name="SmartCamera" type="Camera2D" parent="." node_paths=PackedStringArray("player") groups=["Camera"]]
position = Vector2(943, 541)
zoom = Vector2(0.5, 0.5)
position_smoothing_enabled = true
rotation_smoothing_enabled = true
script = ExtResource("5_b6ajn")
player = NodePath("../SubViewportContainer/Player")

[node name="SkillPopup" type="CanvasLayer" parent="."]
script = ExtResource("7_mrcx1")

[node name="ColorRect" type="ColorRect" parent="SkillPopup"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -531.0
offset_top = -164.0
offset_right = 485.0
offset_bottom = 345.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 0.64705884)

[node name="Message" type="Label" parent="SkillPopup"]
offset_left = 744.99994
offset_top = 583.99994
offset_right = 834.99994
offset_bottom = 606.99994
scale = Vector2(4.6400003, 4.6400003)
text = "fskldjfksjldf"

[editable path="TextBox"]
[editable path="SubViewportContainer/Player"]
