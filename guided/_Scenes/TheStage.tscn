[gd_scene load_steps=18 format=4 uid="uid://bt8pjayii3f46"]

[ext_resource type="Script" uid="uid://by3yf12ty5gjr" path="res://_Scripts/GameManager.gd" id="1_2g5u6"]
[ext_resource type="PackedScene" uid="uid://d1g6kiifioiuw" path="res://_Scenes/Player.tscn" id="1_kchhv"]
[ext_resource type="PackedScene" uid="uid://bmcho5ibaftn" path="res://_Scenes/TextBox.tscn" id="2_2g5u6"]
[ext_resource type="Texture2D" uid="uid://dll6txabnxajo" path="res://Art/Environment/background/dojo wall.png" id="4_mrcx1"]
[ext_resource type="Script" uid="uid://djka36bc42uqr" path="res://_Scripts/SmartCamera.gd" id="5_b6ajn"]
[ext_resource type="Texture2D" uid="uid://chjpcx20i1w1m" path="res://Art/Environment/background/red gate left.png" id="6_4d8gl"]
[ext_resource type="TileSet" uid="uid://07xwbwnxbe7y" path="res://Art/Environment/TheStage.tres" id="7_4d8gl"]
[ext_resource type="Script" uid="uid://7yeoj2w0dtnw" path="res://_Scripts/AnimationPlayer.gd" id="7_c3oyc"]
[ext_resource type="Script" uid="uid://biss50m0vv8gx" path="res://SkillPopup.gd" id="7_mrcx1"]
[ext_resource type="PackedScene" uid="uid://bu6jp2trauwtc" path="res://_Scenes/Sensei.tscn" id="8_mrcx1"]

[sub_resource type="Animation" id="Animation_mrcx1"]
resource_name = "SenseiTalk"
length = 4.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SubViewportContainer/Sensei:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.5, 2.1666667),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(390, 1022), Vector2(1310, 1022), Vector2(2020, 1022)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SubViewportContainer/Sensei:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1.1333333, 1.4333333, 1.6),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector2(400, 902), Vector2(390, 902), Vector2(390, 552), Vector2(390, 601)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("SubViewportContainer/Sensei/PathTrail:emitting")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 2.1666667),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}

[sub_resource type="Animation" id="Animation_2g5u6"]
resource_name = "SenseiWalk_2"
length = 4.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SubViewportContainer/Sensei:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.9666667, 2.9),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(109.598, 1022), Vector2(1310, 1022), Vector2(2020, 1022)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SubViewportContainer/Sensei:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1.5, 1.8, 1.9666667),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector2(400, 752), Vector2(390, 752), Vector2(390, 412), Vector2(390, 497)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("SubViewportContainer/Sensei/PathTrail:emitting")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 2.1666667),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}

[sub_resource type="Animation" id="Animation_2d4v4"]
resource_name = "SenseiWalk_3"
length = 4.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SubViewportContainer/Sensei/PathTrail:emitting")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2.1666667),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SubViewportContainer/Sensei:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1.7666667),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(2330, 902), Vector2(3910, 902)]
}

[sub_resource type="Animation" id="Animation_4d8gl"]
resource_name = "SenseiWalk_4"
length = 4.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SubViewportContainer/Sensei/PathTrail:emitting")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2.1666667),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SubViewportContainer/Sensei:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1.7666667),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(4360, 902), Vector2(5830, 902)]
}

[sub_resource type="Animation" id="Animation_c3oyc"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SubViewportContainer/Player:is_cutscene")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SubViewportContainer/Sensei:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(380, 892)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("SubViewportContainer/Sensei/PathTrail:emitting")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_mrcx1"]
_data = {
&"RESET": SubResource("Animation_c3oyc"),
&"SenseiWalk": SubResource("Animation_mrcx1"),
&"SenseiWalk_2": SubResource("Animation_2g5u6"),
&"SenseiWalk_3": SubResource("Animation_2d4v4"),
&"SenseiWalk_4": SubResource("Animation_4d8gl")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_mrcx1"]
size = Vector2(13.278687, 284.4263)

[node name="TheStage" type="Node2D" node_paths=PackedStringArray("player", "sensei", "sensei_anim_player", "dialog_box", "camera", "stage1_player_spawn", "stage1_sensei_spawn", "stage1_finish_line", "stage2_player_spawn", "stage2_sensei_spawn", "stage2_finish_line", "stage3_player_spawn", "stage3_sensei_spawn", "stage3_finish_line")]
script = ExtResource("1_2g5u6")
player = NodePath("SubViewportContainer/Player")
sensei = NodePath("SubViewportContainer/Sensei")
sensei_anim_player = NodePath("AnimationPlayer")
dialog_box = NodePath("TextBox")
camera = NodePath("SmartCamera")
stage1_player_spawn = NodePath("SubViewportContainer/Detector/Stage1_Player_Spawn")
stage1_sensei_spawn = NodePath("SubViewportContainer/Detector/Stage1_Sensei_Spawn")
stage1_finish_line = NodePath("SubViewportContainer/Detector/Stage1_FinishLine")
stage2_player_spawn = NodePath("SubViewportContainer/Detector/Stage2_Player_Spawn")
stage2_sensei_spawn = NodePath("SubViewportContainer/Detector/Stage2_Sensei_Spawn")
stage2_finish_line = NodePath("SubViewportContainer/Detector/Stage2_FinishLine")
stage3_player_spawn = NodePath("SubViewportContainer/Detector/Stage3_Player_Spawn")
stage3_sensei_spawn = NodePath("SubViewportContainer/Detector/Stage3_Sensei_Spawn")
stage3_finish_line = NodePath("SubViewportContainer/Detector/Stage3_FinishLine")

[node name="TextBox" parent="." instance=ExtResource("2_2g5u6")]
offset = Vector2(80, -685.031)
scale = Vector2(0.9, 0.9)
transform = Transform2D(0.9, 0, 0, 0.9, 80, -685.031)

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_mrcx1")
}
script = ExtResource("7_c3oyc")

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
offset_left = -12.0
offset_top = 133.0
offset_right = 1908.0
offset_bottom = 1213.0
stretch = true
stretch_shrink = 6
metadata/_edit_use_anchors_ = true

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
transparent_bg = true
handle_input_locally = false
size = Vector2i(320, 180)
render_target_update_mode = 4

[node name="ParallaxBackground2" type="ParallaxBackground" parent="SubViewportContainer"]

[node name="ParallaxLayer" type="ParallaxLayer" parent="SubViewportContainer/ParallaxBackground2"]
motion_scale = Vector2(0.2, 0.2)

[node name="Sprite2D" type="Sprite2D" parent="SubViewportContainer/ParallaxBackground2/ParallaxLayer"]
position = Vector2(939.55554, 528.5)
scale = Vector2(6.1833334, 6.1833334)
texture = ExtResource("4_mrcx1")

[node name="Player" parent="SubViewportContainer" instance=ExtResource("1_kchhv")]
position = Vector2(80, 856)
scale = Vector2(4.4399977, 4.4399977)
is_cutscene = true

[node name="CollisionShape2D" parent="SubViewportContainer/Player" index="1"]
visible = false

[node name="ParallaxBackground" type="ParallaxBackground" parent="SubViewportContainer"]

[node name="ParallaxLayer" type="ParallaxLayer" parent="SubViewportContainer/ParallaxBackground"]

[node name="Sprite2D" type="Sprite2D" parent="SubViewportContainer/ParallaxBackground/ParallaxLayer"]
position = Vector2(979, 548)
scale = Vector2(23.517273, 23.517273)
texture = ExtResource("6_4d8gl")

[node name="TileMapLayer" type="TileMapLayer" parent="SubViewportContainer"]
position = Vector2(-18, 187)
scale = Vector2(8, 8)
tile_map_data = PackedByteArray("AAACAAQAAQABAAAAAAADAAQAAQABAAAAAAAEAAQAAQABAAAAAAAFAAQAAQABAAAAAAAGAAQAAQABAAAAAAAHAAQAAQABAAAAAAAIAAMAAQABAAAAAAAJAAMAAQABAAAAAAAKAAMAAQABAAAAAAALAAMAAQABAAAAAAAMAAMAAQABAAAAAAAAAAwAAQABAAAAAAABAAwAAQABAAAAAAACAAwAAQABAAAAAAADAAwAAQABAAAAAAAEAAwAAQABAAAAAAAFAAwAAQABAAAAAAAGAAwAAQABAAAAAAAHAAwAAQABAAAAAAAIAAwAAQABAAAAAAAJAAwAAQABAAAAAAAKAAwAAQABAAAAAAALAAwAAQABAAAAAAAMAAwAAQABAAAAAAANAAwAAQABAAAAAAAOAAwAAQABAAAAAAAPAAwAAQABAAAAAAAQAAwAAQABAAAAAAARAAwAAQABAAAAAAASAAwAAQABAAAAAAATAAwAAQABAAAAAAAUAAwAAQABAAAAAAAVAAwAAQABAAAAAAAWAAwAAQABAAAAAAAXAAwAAQABAAAAAAAYAAwAAQABAAAAAAAZAAwAAQABAAAAAAAaAAwAAQABAAAAAAAbAAwAAQABAAAAAAAcAAwAAQABAAAAAAAdAAwAAQABAAAAAAAeAAwAAQABAAAAAAAfAAwAAQABAAAAAAAUAAcAAQABAAAAAAAVAAcAAQABAAAAAAAWAAcAAQABAAAAAAAXAAcAAQABAAAAAAAYAAcAAQABAAAAAAAZAAcAAQABAAAAAAAaAAcAAQABAAAAAAAbAAcAAQABAAAAAAAgAAcAAQABAAAAAAAfAAcAAQABAAAAAAAeAAcAAQABAAAAAAAdAAcAAQABAAAAAAAcAAcAAQABAAAAAAAAAAsAAQABAAAAAAABAAsAAQABAAAAAAACAAsAAQABAAAAAAADAAsAAQABAAAAAAAEAAsAAQABAAAAAAAFAAsAAQABAAAAAAAGAAsAAQABAAAAAAAHAAsAAQABAAAAAAAIAAsAAQABAAAAAAAJAAsAAQABAAAAAAAKAAsAAQABAAAAAAALAAsAAQABAAAAAAAMAAsAAQABAAAAAAANAAsAAQABAAAAAAAOAAsAAQABAAAAAAAPAAsAAQABAAAAAAAQAAsAAQABAAAAAAARAAsAAQABAAAAAAASAAsAAQABAAAAAAATAAsAAQABAAAAAAAUAAsAAQABAAAAAAAVAAsAAQABAAAAAAAWAAsAAQABAAAAAAAXAAsAAQABAAAAAAAYAAsAAQABAAAAAAAZAAsAAQABAAAAAAAaAAsAAQABAAAAAAAbAAsAAQABAAAAAAAcAAsAAQABAAAAAAAdAAsAAQABAAAAAAAeAAsAAQABAAAAAAAfAAsAAQABAAAAAAAAAPv/AgACAAEAAAAAAPz/AgACAAEAAAAAAP3/AgACAAEAAAAAAP7/AgACAAEAAAAAAP//AgACAAEAAAAAAAAAAgACAAEAAAAAAAEAAgACAAEAAAAAAAIAAgACAAEAAAAAAAMAAgACAAEAAAAAAAQAAgACAAEAAAAAAAUAAgACAAEAAAAAAAYAAgACAAEAAAAAAAcAAgACAAEAAAAAAAgAAgACAAEAAAAAAAkAAgACAAEAAAAAAAoAAgACAAEAAAABAPv/AgACAAEAAAACAPv/AgACAAEAAAADAPv/AgACAAEAAAAEAPv/AgACAAEAAAAFAPv/AgACAAEAAAAGAPv/AgACAAEAAAAHAPv/AgACAAEAAAAIAPv/AgACAAEAAAAJAPv/AgACAAEAAAAKAPv/AgACAAEAAAALAPv/AgACAAEAAAAMAPv/AgACAAEAAAANAPv/AgACAAEAAAAOAPv/AgACAAEAAAAPAPv/AgACAAEAAAAQAPv/AgACAAEAAAARAPv/AgACAAEAAAASAPv/AgACAAEAAAATAPv/AgACAAEAAAAUAPv/AgACAAEAAAAVAPv/AgACAAEAAAAWAPv/AgACAAEAAAAXAPv/AgACAAEAAAAYAPv/AgACAAEAAAAZAPv/AgACAAEAAAAaAPv/AgACAAEAAAAbAPv/AgACAAEAAAAcAPv/AgACAAEAAAAdAPv/AgACAAEAAAAeAPv/AgACAAEAAAA=")
tile_set = ExtResource("7_4d8gl")

[node name="Sensei" parent="SubViewportContainer" instance=ExtResource("8_mrcx1")]
position = Vector2(380, 892)
scale = Vector2(4.3200016, 4.3200016)

[node name="Sprite2D" parent="SubViewportContainer/Sensei" index="0"]
position = Vector2(12.037032, -6.0185137)

[node name="CollisionShape2D" parent="SubViewportContainer/Sensei" index="1"]
visible = false

[node name="Detector" type="Node2D" parent="SubViewportContainer"]

[node name="Stage1_Player_Spawn" type="Marker2D" parent="SubViewportContainer/Detector"]
position = Vector2(141, 885)
scale = Vector2(2, 2)

[node name="Stage2_Player_Spawn" type="Marker2D" parent="SubViewportContainer/Detector"]
position = Vector2(2164, 885)
scale = Vector2(2, 2)

[node name="Stage3_Player_Spawn" type="Marker2D" parent="SubViewportContainer/Detector"]
position = Vector2(4169, 848)
scale = Vector2(2, 2)

[node name="Stage1_Sensei_Spawn" type="Marker2D" parent="SubViewportContainer/Detector"]
position = Vector2(282, 885)
scale = Vector2(2, 2)

[node name="Stage2_Sensei_Spawn" type="Marker2D" parent="SubViewportContainer/Detector"]
position = Vector2(2315, 885)
scale = Vector2(2, 2)

[node name="Stage3_Sensei_Spawn" type="Marker2D" parent="SubViewportContainer/Detector"]
position = Vector2(4361, 848)
scale = Vector2(2, 2)

[node name="Stage1_FinishLine" type="Area2D" parent="SubViewportContainer/Detector"]
position = Vector2(12, -133)

[node name="CollisionShape2D" type="CollisionShape2D" parent="SubViewportContainer/Detector/Stage1_FinishLine"]
position = Vector2(1938.6, 533)
scale = Vector2(4.8799987, 4.8799987)
shape = SubResource("RectangleShape2D_mrcx1")
debug_color = Color(0.68085706, 0.29902464, 1, 0.41960785)

[node name="Stage2_FinishLine" type="Area2D" parent="SubViewportContainer/Detector"]
position = Vector2(1947, -133)

[node name="CollisionShape2D" type="CollisionShape2D" parent="SubViewportContainer/Detector/Stage2_FinishLine"]
position = Vector2(1938.6, 533)
scale = Vector2(4.8799987, 4.8799987)
shape = SubResource("RectangleShape2D_mrcx1")
debug_color = Color(0.68085706, 0.29902464, 1, 0.41960785)

[node name="Stage3_FinishLine" type="Area2D" parent="SubViewportContainer/Detector"]
position = Vector2(3871, -133)

[node name="CollisionShape2D" type="CollisionShape2D" parent="SubViewportContainer/Detector/Stage3_FinishLine"]
position = Vector2(1938.6, 533)
scale = Vector2(4.8799987, 4.8799987)
shape = SubResource("RectangleShape2D_mrcx1")
debug_color = Color(0.68085706, 0.29902464, 1, 0.41960785)

[node name="SmartCamera" type="Camera2D" parent="." node_paths=PackedStringArray("player") groups=["Camera"]]
position = Vector2(943, 541)
scale = Vector2(1.1, 1.1)
position_smoothing_enabled = true
rotation_smoothing_enabled = true
script = ExtResource("5_b6ajn")
player = NodePath("../SubViewportContainer/Player")

[node name="SkillPopup" type="CanvasLayer" parent="."]
visible = false
script = ExtResource("7_mrcx1")

[node name="ColorRect" type="ColorRect" parent="SkillPopup"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -531.0
offset_top = -164.0
offset_right = 485.0
offset_bottom = 345.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 0.64705884)

[node name="Message" type="Label" parent="SkillPopup"]
offset_left = 744.99994
offset_top = 583.99994
offset_right = 834.99994
offset_bottom = 606.99994
scale = Vector2(4.6400003, 4.6400003)
text = "fskldjfksjldf"

[editable path="TextBox"]
[editable path="SubViewportContainer/Player"]
[editable path="SubViewportContainer/Sensei"]
